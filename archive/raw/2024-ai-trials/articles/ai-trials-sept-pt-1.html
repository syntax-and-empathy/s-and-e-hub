<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ai-trials-sept-pt-1 – Syntax &amp; Empathy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-c484084b5e60782ea3171f5d3692ec1b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Syntax &amp; Empathy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../articles/"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../resources/"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">TL;DR</a></li>
  <li><a href="#trial-elements" id="toc-trial-elements" class="nav-link" data-scroll-target="#trial-elements">Trial Elements</a>
  <ul class="collapse">
  <li><a href="#ai-models" id="toc-ai-models" class="nav-link" data-scroll-target="#ai-models">AI Models</a></li>
  <li><a href="#holidays" id="toc-holidays" class="nav-link" data-scroll-target="#holidays">Holidays</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  </ul></li>
  <li><a href="#cot-article-template-revisited" id="toc-cot-article-template-revisited" class="nav-link" data-scroll-target="#cot-article-template-revisited">CoT Article Template Revisited</a>
  <ul class="collapse">
  <li><a href="#super-prompt-shenanigans" id="toc-super-prompt-shenanigans" class="nav-link" data-scroll-target="#super-prompt-shenanigans">Super Prompt Shenanigans</a></li>
  </ul></li>
  <li><a href="#insights-observations" id="toc-insights-observations" class="nav-link" data-scroll-target="#insights-observations">Insights &amp; Observations</a>
  <ul class="collapse">
  <li><a href="#the-good" id="toc-the-good" class="nav-link" data-scroll-target="#the-good">The Good</a></li>
  <li><a href="#the-bad" id="toc-the-bad" class="nav-link" data-scroll-target="#the-bad">The Bad</a></li>
  <li><a href="#the-ugly" id="toc-the-ugly" class="nav-link" data-scroll-target="#the-ugly">The Ugly</a></li>
  </ul></li>
  <li><a href="#up-next" id="toc-up-next" class="nav-link" data-scroll-target="#up-next">Up Next</a></li>
  <li><a href="#additional-tools" id="toc-additional-tools" class="nav-link" data-scroll-target="#additional-tools">Additional Tools</a>
  <ul class="collapse">
  <li><a href="#cot-prompts" id="toc-cot-prompts" class="nav-link" data-scroll-target="#cot-prompts">CoT Prompts</a></li>
  <li><a href="#diagram-code" id="toc-diagram-code" class="nav-link" data-scroll-target="#diagram-code">Diagram Code</a></li>
  <li><a href="#not-so-super-prompt-workflow" id="toc-not-so-super-prompt-workflow" class="nav-link" data-scroll-target="#not-so-super-prompt-workflow">(not so) Super Prompt Workflow</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<p><u></u>Image created with Midjourney v6 alpha### Preface</p>
<p>This post is part of a year-long <u>initiative where I employ AI to create content</u> about holiday traditions worldwide. The objective is to observe how various AI tools perform and improve in content creation with minimal human intervention over time. This is the 1st of 4 (maybe 5) articles for the month of <u>September</u>.</p>
<p><em>Prompts and interactions with different AI models will be documented as they occur, providing insights into the methodologies, challenges, and adjustments made throughout the project</em></p>
<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">TL;DR</h2>
<p>This month, I’m rebooting Chain of Thought (CoT) prompting after encountering questionable results last month. This article documents my second attempt at creating a new article template using CoT prompts. While I initially planned to test it extensively on holidays beyond Labor Day and Vietnam’s Independence Day, I uncovered a scoring issue that may be an anomaly, a new development, or simply something that went unnoticed until the volume of articles without additional variables grew large enough to reveal it.</p>
</section>
<section id="trial-elements" class="level2">
<h2 class="anchored" data-anchor-id="trial-elements">Trial Elements</h2>
<section id="ai-models" class="level3">
<h3 class="anchored" data-anchor-id="ai-models">AI Models</h3>
<ul>
<li>Claude 3.5 Sonnet</li>
<li>ChatGPT-4o</li>
</ul>
</section>
<section id="holidays" class="level3">
<h3 class="anchored" data-anchor-id="holidays">Holidays</h3>
<ol type="1">
<li>Yamashita Surrender Day - September 2nd - Philippines</li>
<li>Labor Day - September 2nd - United States</li>
<li>Vietnam’s Independence Day - September 2nd - Vietnam</li>
</ol>
</section>
<section id="goals" class="level3">
<h3 class="anchored" data-anchor-id="goals">Goals</h3>
<ul>
<li>Develop and refine new article templates using Chain of Thought (CoT) prompting</li>
<li>Test new templates with zero-shot and one-shot article generation</li>
<li>Identify areas for improvement in CoT prompting techniques</li>
<li>Experiment with standardizing the visual aspects of the scoring charts</li>
</ul>
</section>
</section>
<section id="cot-article-template-revisited" class="level2">
<h2 class="anchored" data-anchor-id="cot-article-template-revisited">CoT Article Template Revisited</h2>
<p>At the end of <u>August</u>, the results indicated that the prompts I’ve been using all along, on their own, were yielding better results than those created through the CoT approach. Simply put, I found this hard to believe.</p>
<p>Based on this belief, I read various articles and documents I could find on the subject. I wanted to gain a better understanding of the approach and use the month of September to improve on how I employ it.</p>
<p><u></u>This incremental process, each prompt met with verbose AI responses, became the focus of this article. While I had considered introducing instructions to limit the responses I didn’t want to risk undermining the process. Rather than detailing every exchange, I’ve outlined the key steps in developing the CoT template:</p>
<ol type="1">
<li>I began by tasking the AIs to create a template for articles about holidays, observed days, festivals, and similar cultural events worldwide. This set the foundation for our template development.</li>
<li>After receiving the initial outlines, I instructed the AIs to critically review their work and suggest additional content considerations for both general and specific event types, along with the rationale for each.</li>
<li>I told the AIs to merge new additions into their outlines. Claude listed new sections, bookended by <code>[Previous content remains the same]</code> and <code>[Rest of the previous content remains the same]</code>. It didn’t show where they’d fit in the original outline, so I lacked context for their placement.</li>
<li>To finalize the outline, I asked the AIs to conduct a comprehensive review of their updated outlines, requesting recommendations for improvements that would ensure compelling storytelling while maintaining educational value.</li>
<li>Based on their recommendations, I directed the AIs to add specific items to their outlines. Both AIs gave almost identical suggestions, differing only in the order they were supplied. GPT included an item on ethics which is certainly relevant but not as a content item, choosing to defer it to the guidelines portion of our exchange.</li>
<li>Next, I tasked them with identifying key considerations for writing about culturally specific occasions and reasoning for each suggestion. These, in turn, were used as the basis of our writing guidelines.</li>
<li>Given the realistic constraints of an AI-assisted writing process, I had them eliminate items requiring external sources or extensive research beyond readily available information.</li>
<li>I then asked the AIs to review the entire template and writing guidelines holistically and provide guidance on considerations for ensuring high-quality articles that cover the breadth of event types with engaging and educational depth.</li>
<li>As the final step, I instructed the AIs combine the completed outline, writing guidelines, and instructions into a comprehensive template. This resulted in a cohesive guide for our AI-assisted content creation, clearly delineating its components.</li>
</ol>
<p>The process of creating this template was smooth much like the first was. That said, the scoring mechanism has always been plagued with a variety of issues that I am not looking forward to. Along the way there were a number of recommendations made during the template creation process that I’ll come back and consider in a later set of articles.</p>
<section id="super-prompt-shenanigans" class="level3">
<h3 class="anchored" data-anchor-id="super-prompt-shenanigans">Super Prompt Shenanigans</h3>
<p>I used my standard super prompts (SP) to generate articles for each holiday using both AI models. These SP articles would later serve as a baseline for comparison with templates from the new Chain of Thought (CoT) approach.</p>
<p><u></u>I created half of these articles in a single session per AI, while generating the remaining half in separate sessions. Upon rendering the charts, I immediately noticed a problem.</p>
<p><u></u>The scores for each successive set of articles were incrementally higher without clear justification. After confirming my suspicion, it’s clear that I need to revisit my evaluation process to ensure consistent results. Fodder for future articles.</p>
</section>
</section>
<section id="insights-observations" class="level2">
<h2 class="anchored" data-anchor-id="insights-observations">Insights &amp; Observations</h2>
<section id="the-good" class="level3">
<h3 class="anchored" data-anchor-id="the-good">The Good</h3>
<ul>
<li>The CoT prompting process yielded a robust, comprehensive article template that effectively guides AI-generated content creation for cultural events and holidays.</li>
<li>The iterative template creation process, while time-consuming, resulted in a valuable tool for future content generation experiments, with clear distinctions between outline, guidelines, and instructions.</li>
<li>The holistic review approach encouraged the AIs to consider both engaging storytelling and educational depth, leading to more well-rounded content suggestions.</li>
</ul>
</section>
<section id="the-bad" class="level3">
<h3 class="anchored" data-anchor-id="the-bad">The Bad</h3>
<ul>
<li>The AI responses, while comprehensive, were often verbose, resulting in lengthy conversations that needed to be distilled into key points for practical use.</li>
<li>There were challenges in contextualizing new content suggestions within the existing outline structure, as seen with Claude’s bookended additions.</li>
<li>The scoring process for SP articles revealed potential biases introduced by using a single editor session, emphasizing the need for more robust evaluation processes.</li>
</ul>
</section>
<section id="the-ugly" class="level3">
<h3 class="anchored" data-anchor-id="the-ugly">The Ugly</h3>
<p>In a surprising turn of events, Claude seemed to “forget” about articles it had previously written when asked to compare them. Despite its typically superior memory compared to GPT, Claude insisted it hadn’t authored certain articles, even after multiple attempts at clarification. This unexpected lapse in continuity highlighted the unpredictable nature of AI behavior and the importance of clear, consistent prompting techniques.</p>
</section>
</section>
<section id="up-next" class="level2">
<h2 class="anchored" data-anchor-id="up-next">Up Next</h2>
<ol type="1">
<li>Apply the new CoT article template to several events over the coming weeks, assessing its effectiveness and adaptability across different contexts.</li>
<li>Analyze the results from scoring multiple holiday articles to identify patterns, strengths, and areas for improvement in the template’s performance.</li>
<li>Refine the CoT article template by testing unused AI suggestions and the results of its application to diverse holidays and cultural events.</li>
</ol>
</section>
<section id="additional-tools" class="level2">
<h2 class="anchored" data-anchor-id="additional-tools">Additional Tools</h2>
<p>The tools behind the articles. No affiliations.</p>
<ul>
<li><u>Arc</u>: Browser supreme</li>
<li>ChatGPT-4o <code>*</code>: Visualizations</li>
<li>Mermaid Chart GPT: Draft flowchart</li>
<li><u>Mermaid Chart</u>: When it got complicated and the code got messy…</li>
<li><u>Midjourney</u> <code>*</code>: Article and AI article images</li>
<li><u>Rename X</u> <code>*</code>: File renaming app for Mac</li>
<li><u>Type.ai</u> <code>*</code>: Text editor</li>
</ul>
<p>Paid items indicated by <code>*</code></p>
<p><u></u>Image created with Midjourney v6 alpha## Appendix:</p>
<section id="cot-prompts" class="level3">
<h3 class="anchored" data-anchor-id="cot-prompts">CoT Prompts</h3>
<pre><code>Create a template for articles specific to holidays, observed days, festivals, and similar events for cultures around the world. The articles need to provide the story of the holiday including it's historical origin, how it has transformed over time, modern day practices, and the global perspective of the event. Provide the rationale for every piece of content you recommend.</code></pre>
<pre><code>Review the outline and any additional content that should be considered in genreral, as well as content that would be specific to a single type of event (e.g. holiday but not festival). Provide the rational for any you identify so that I might decide which I would like added to the template.</code></pre>
<pre><code>Perform a holistic review of the article outline and provide a list of recommendations on how it might be improved to ensure engaging storytelling without compromising educational aspects of the content.</code></pre>
<pre><code>This is the template we'll be moving forward with. Do not alter it unless specifically requested.

Identify key considerations when writing articles with this template for culturally specific occasions. Provide the reasoning for each item you suggest.</code></pre>
<pre><code>Remove items that require external sources, such as speaking with individuals or research beyond the sum of the information readily available.</code></pre>
<pre><code>These should be discussed as guidelines for writing the articles going forward.

Review the article outline and identify any additional writing guidelines that should be included while respecting the limitations previously mentioned.</code></pre>
<pre><code>Add all of the writing guidelines as an appendix to the article outline.</code></pre>
<pre><code>Next, you will review the sum of the template and writing guidelines holistically. Provide guidance on things to consider to ensure high quality articles that cover the breadth of the event types being considered with depth that is both engaging and educational.</code></pre>
<pre><code>Add these considerations as guidance to the author before the existing outline and guidelines and provide me with the resulting document in its entirety.</code></pre>
</section>
<section id="diagram-code" class="level3">
<h3 class="anchored" data-anchor-id="diagram-code">Diagram Code</h3>
<section id="cot-workflows" class="level4">
<h4 class="anchored" data-anchor-id="cot-workflows">CoT Workflows</h4>
<pre><code>---
config:
  theme: base
  layout: elk
---
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#fff',
      'primaryTextColor': '#515B61',
      'primaryBorderColor': '#515B61',
      'lineColor': '#0E394C',
      'secondaryColor': '#55A5B3',
      'tertiaryColor': '#E0EBEF'
    }
  }
}%%
flowchart TD
    subgraph CCoTT["Claude CoT Template"]
        CDO("Draft Outline") --&gt; CIC("Identify Content") --&gt; CMC("Merge Content") --&gt; CR("Review")
        CR --&gt; CU("Update") &amp; CG("Guidance")
        CU --&gt; CRD("Rough Draft")
        CG --&gt; CWG("Writing Guidelines") --&gt; CRI("Remove Items")
        CRD --&gt; CCR("Review Template") --&gt; CC("Considerations") 
        CRD &amp; CRI &amp; CC --&gt; CAG("Claude's Article Guide")      
    end
    subgraph GCoTT["GPT-4o Template"]
        GDO("Draft Outline") --&gt; GIC("Identify Content") --&gt; GMC("Merge Content") --&gt; GR("Review")
        GR --&gt; GU("Update") &amp; GG("Guidance")
        GU --&gt; GRD("Rough Draft")
        GG --&gt; GWG("Writing Guidelines") --&gt; GRI("Remove Items")
        GRD --&gt; GCR("Review Template") --&gt; GC("Considerations") 
        GRD &amp; GRI &amp; GC --&gt; GAG("GPT's Article Guide")      
    end
    subgraph CoT["Chain of Thought Templates"]
        CCoTT
        GCoTT
    end
    style CoT fill:#D3E4E6,stroke:#000000</code></pre>
</section>
</section>
<section id="not-so-super-prompt-workflow" class="level3">
<h3 class="anchored" data-anchor-id="not-so-super-prompt-workflow">(not so) Super Prompt Workflow</h3>
<pre><code>---
config:
  theme: base
  layout: elk
---
%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#fff',
      'primaryTextColor': '#515B61',
      'primaryBorderColor': '#515B61',
      'lineColor': '#0E394C',
      'secondaryColor': '#55A5B3',
      'tertiaryColor': '#E0EBEF'
    }
  }
}%%
flowchart TD
    subgraph ClaudeA["Claude Articles"]
        01("Claude") --&gt; 10 &amp; 11 &amp; 12
        10("LD-SP Article")
        11("VI-SP Article")
        12("YS-SP Article")
        02("Claude") --&gt; 13("DD-SP Article")
        03("Claude") --&gt; 14("GC-SP Article")
        04("Claude") --&gt; 15("BI-SP Article")
    end
    subgraph ClaudeB["Claude Scoring"]
        01b("Claude") --&gt; 30 &amp; 31 &amp; 32 &amp; 33 &amp; 34 &amp; 35
        30("LD-SP Score")
        31("VI-SP Score")
        32("YS-SP Score")
        33("DD-SP Score")
        34("GC-SP Score")
        35("BI-SP Score")
    end
    subgraph GPTA["GPT Articles"]
        06("GPT-4o") --&gt; 20 &amp; 21 &amp; 22
        20("LD-SP Article")
        21("VI-SP Article")
        22("YS-SP Article")
        07("GPT-4o") --&gt; 23("DD-SP Article")
        08("GPT-4o") --&gt; 24("GC-SP Article")
        09("GPT-4o") --&gt; 25("GC-YS Article")
    end
    subgraph GPTB["GPT Scoring"]
        06b("GPT-4o") --&gt; 40 &amp; 41 &amp; 42 &amp; 43 &amp; 44 &amp; 45
        40("LD-SP Score")
        41("VI-SP Score")
        42("YS-SP Score")
        43("DD-SP Score")
        44("GC-SP Score")
        45("BI-SP Score")
    end
    subgraph SP["Super Prompts"]
        JSNA("JSON Author Role") --&gt; ClaudeA &amp; ClaudeA &amp; GPTA &amp; GPTA
        XMLT("XML Template &amp; Process") --&gt; ClaudeA &amp; ClaudeA &amp; GPTA &amp; GPTA
        ClaudeA --&gt; ClaudeB
        GPTA --&gt; GPTB
        JSNE("JSON Editor Role") --&gt; ClaudeB &amp; ClaudeB &amp; GPTB &amp; GPTB
        XMLE("XML Rubric") --&gt; ClaudeB &amp; ClaudeB &amp; GPTB &amp; GPTB
    end
    style SP fill:#D3E4E6,stroke:#000000</code></pre>
<p><u></u></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/syntaxandempathy\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© {date:YYYY} Syntax &amp; Empathy</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>