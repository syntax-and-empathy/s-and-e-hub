<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ai-trials-march-pt-1 – Syntax &amp; Empathy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-c11994fcf07a16f1c4dfa798fec8ff96.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Syntax &amp; Empathy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../articles/"> 
<span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../resources/"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#spring-equinox" id="toc-spring-equinox" class="nav-link active" data-scroll-target="#spring-equinox">Spring Equinox</a>
  <ul class="collapse">
  <li><a href="#exploring-presets-and-prompts" id="toc-exploring-presets-and-prompts" class="nav-link" data-scroll-target="#exploring-presets-and-prompts">Exploring Presets and Prompts</a></li>
  <li><a href="#a-closer-comparison" id="toc-a-closer-comparison" class="nav-link" data-scroll-target="#a-closer-comparison">A Closer Comparison</a></li>
  </ul></li>
  <li><a href="#holika-dahan" id="toc-holika-dahan" class="nav-link" data-scroll-target="#holika-dahan">Holika Dahan</a>
  <ul class="collapse">
  <li><a href="#leonardo-kino-xl" id="toc-leonardo-kino-xl" class="nav-link" data-scroll-target="#leonardo-kino-xl">Leonardo Kino XL</a></li>
  <li><a href="#midjourney-5.2" id="toc-midjourney-5.2" class="nav-link" data-scroll-target="#midjourney-5.2">Midjourney 5.2</a></li>
  <li><a href="#midjourney-v6-alpha" id="toc-midjourney-v6-alpha" class="nav-link" data-scroll-target="#midjourney-v6-alpha">Midjourney v6 alpha</a></li>
  <li><a href="#stablediffusion" id="toc-stablediffusion" class="nav-link" data-scroll-target="#stablediffusion">StableDiffusion</a></li>
  </ul></li>
  <li><a href="#a-step-back-a-version-forward" id="toc-a-step-back-a-version-forward" class="nav-link" data-scroll-target="#a-step-back-a-version-forward">A Step Back, A Version Forward</a></li>
  <li><a href="#key-insights" id="toc-key-insights" class="nav-link" data-scroll-target="#key-insights">Key Insights</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<p><u></u>Artwork created with Midjourney v6 alpha### Preface</p>
<p>This post is part of a year-long <u>initiative where I employ AI to create content</u> about holiday traditions worldwide. The objective is to observe how various AI tools perform and improve in content creation with minimal human intervention over time. This article is 1 of 2 posts for the month of <u>March</u>.</p>
<p><em>Prompts and interactions with different AI models will be documented as they occur, providing insights into the methodologies, challenges, and adjustments made throughout the project.</em></p>
<p>I have never had any real visibility into the customs and traditions of cultures around the world. Of the few I’ve had some level of awareness of, Holi has always been magical to me, or more specifically, the imagery that is born from the celebration of it. I’ve always known it as a celebration of color, which I’m sure isn’t the whole story, and this month I get to learn its history and how it is celebrated beyond the photographs I’ve seen. I had hoped to dive into tones so that I could explore if they in themselves could shape the images that get created, but that will have to wait till another month. This month, I’ll work with a few image generating AI not only to see how they represent such a vibrant holiday, ok, it really is that, but now I have an excuse for creating a ridiculous number of images I’m sure to love.</p>
<section id="spring-equinox" class="level2">
<h2 class="anchored" data-anchor-id="spring-equinox">Spring Equinox</h2>
<p>Working with the AI to compose two articles using the same information and prompts, I decided to split the image creation into a dry run to get a feel for the different platforms in their default state. Expecting that the differences in the AI image generators would already pose a challenge on top of the subjective nature of what is and is not visually appealing from one person to the next, I didn’t anticipate the options to be as much of a challenge.</p>
<section id="exploring-presets-and-prompts" class="level3">
<h3 class="anchored" data-anchor-id="exploring-presets-and-prompts">Exploring Presets and Prompts</h3>
<p>In the first set of images, I took minimal advantage of the presets available in Leonardo.ai and StableDiffusion (via DreamStudio). They have fairly similar interfaces with fairly similar options, provided you ignore the abundance of bells and whistles in the former, but I hadn’t considered the potential for such radical differences in the options themselves. The default models had slightly different presets which only provided clear overlap at times and would change with the different models. Other details I had been working with were too troublesome to match up, if even possible.</p>
<p>Midjourney, on the other hand, doesn’t provide such settings for image creation, instead relying on the user’s prompt to specify not only the content of the image, but things like the medium or style should you want something that specific. I made some of the Midjourney prompts a little more specific by including the style information that would help to inform it in the same way the presets might in the others.</p>
</section>
<section id="a-closer-comparison" class="level3">
<h3 class="anchored" data-anchor-id="a-closer-comparison">A Closer Comparison</h3>
<p>For the second set of images, I created a new role to describe the images that would provide greater detail about the medium and style being prescribed in order to try and reduce the disparity between the 3 AI image generators. Additionally, I chose relevant presets in Leonardo and StableDiffusion.</p>
<pre><code>You are a Journalist Specializing in Holi Festival Coverage with the following skills and traits:
- Expertise in cultural anthropology with a focus on Indian traditions and festivals
- Proficient in descriptive writing and storytelling to vividly capture the essence of Holi
- Knowledgeable about Hindu deities, particularly Radha and Krishna, and their significance in Holi celebrations
- Skilled in ethnographic research to understand and convey the diverse ways Holi is celebrated across different regions
- Ability to analyze the social and cultural impacts of Holi on contemporary Indian society and diaspora communities
- Proficiency in photojournalism to complement articles with visually compelling images of Holi celebrations
- Adept at conducting interviews with participants, organizers, and cultural experts to gather multifaceted perspectives on the festival
- Skilled in critical thinking to draw connections between Holi traditions and broader themes of unity, forgiveness, and renewal
- Innovative in finding new angles and stories within the Holi festival each year to keep coverage fresh and engaging
- Familiarity with digital publishing platforms and social media to effectively share and promote Holi coverage
- Adaptability to cover Holi in various contexts, from traditional village celebrations to urban and international events
- Attention to detail in fact-checking and accurately representing the traditions and practices of Holi
- Research skills in sourcing historical and theological insights on Radha, Krishna, and their role in the narratives of Holi
- Continuous learning to stay updated on new research, trends, and discussions related to Holi and Hindu festivals more broadly
- Concise communication to distill complex cultural concepts into accessible and engaging articles for a wide audience

Your goal is to provide in-depth coverage of the festival of Holi, not just the festival but the people and their traditions.
</code></pre>
<p>I had reasonably good success based on my expectations, considering I had been experimenting with each of the AI in question early in this project, as well as within others. I found some of the images to be quite pleasing; however, beauty is in the eye of the beholder, and you might come away with different preferences.</p>
</section>
</section>
<section id="holika-dahan" class="level2">
<h2 class="anchored" data-anchor-id="holika-dahan">Holika Dahan</h2>
<p>The anticipation of creating images for Holika Dahan, the eve of Holi, was tinged with the expectation of visually stunning results. However, the process was marred by unexpected challenges and outcomes that were far from the creative feast of visuals I had imagined.</p>
<p>Initially, I had hoped to select and showcase images based on their similarity, creating a cohesive gallery from the outputs of each AI. A few of the AI involved had other plans, as I found myself choosing images more out of necessity to avoid unsettling distortions rather than artistic preference.</p>
<p>The recent release of Claude 3 gave promise to having the Sonnet model provide the details for imagery, and it did an excellent job of generating descriptive content for the accompanying article, despite minor hiccups.</p>
<section id="leonardo-kino-xl" class="level3">
<h3 class="anchored" data-anchor-id="leonardo-kino-xl">Leonardo Kino XL</h3>
<p>Having previously explored Leonardo’s capabilities, I was somewhat surprised by its performance this time around. My past experiences had set a higher expectation for its ability to render humans, whether individually or in groups. The comparison with Midjourney’s latest version perhaps unfairly highlighted Leonardo’s shortcomings, making it seem as though it had taken a step back in its capabilities.</p>
<p>Despite leveraging “premium” features thanks to previously purchased credits, Leonardo struggled with larger group scenes. It did, however, shine in delivering graphic novel style images, suggesting a potential niche where it could unexpectedly excel.</p>
</section>
<section id="midjourney-5.2" class="level3">
<h3 class="anchored" data-anchor-id="midjourney-5.2">Midjourney 5.2</h3>
<p>Midjourney’s version 5.2 maintained its standing as a strong contender with comparable models, especially for the specific subject matter of this project. Its allowed for straightforward image generation without preset guesswork or negative prompts, though it was not immune to occasional glitches such as extra limbs or facial distortions. Nevertheless, it faced far fewer issues compared to Leonardo or StableDiffusion.</p>
</section>
<section id="midjourney-v6-alpha" class="level3">
<h3 class="anchored" data-anchor-id="midjourney-v6-alpha">Midjourney v6 alpha</h3>
<p>The alpha version of Midjourney v6 proved to be fairly superior, outperforming other models in almost every test. Its performance across various subjects and mediums is a testament to the rapid advancements in AI image generation technology, sparking curiosity about its future developments as well as future releases of the competing models.</p>
</section>
<section id="stablediffusion" class="level3">
<h3 class="anchored" data-anchor-id="stablediffusion">StableDiffusion</h3>
<p>Stable Diffusion felt like the “Bard” among the models tested, with a high rate of discarded images due to various imperfections. My efforts to improve its output to a level where it produced images I was comfortable sharing through the use of negative prompts highlighted the significant challenges in achieving desired results with this particular model.</p>
<pre><code>plaintextCopy codeworst quality, normal quality, low quality, low res, blurry, text, watermark, logo, banner, extra digits, cropped, jpeg artifacts, signature, username, error, sketch ,duplicate, ugly, monochrome, horror, geometry, mutation, disgusting</code></pre>
<p>While I only did a brief search for a negative prompt, the extensive list of negative prompts with versioning numbers on them hints that the fact it is open source is likely a key factor in the determination required to use it and the devotion many of its users demonstrate.</p>
</section>
</section>
<section id="a-step-back-a-version-forward" class="level2">
<h2 class="anchored" data-anchor-id="a-step-back-a-version-forward">A Step Back, A Version Forward</h2>
<p>This exploration emphasized the critical role of carefully crafted prompts, including negative ones, in shaping the output of AI-generated images. The need for such specificity highlights the challenges in aligning AI capabilities with nuanced artistic visions, demonstrating both the potential and limitations of current technologies in producing desirable results with relative ease.</p>
<p>As we move forward, the insights gained from this project will undoubtedly influence future creative endeavors, guiding us towards more sophisticated and culturally aware applications of AI in art and storytelling.</p>
</section>
<section id="key-insights" class="level2">
<h2 class="anchored" data-anchor-id="key-insights">Key Insights</h2>
<p><strong>Positive Observations:</strong></p>
<ul>
<li>Anthropic’s new Claude versions easily handled previously near impossible tasks, while Midjourney’s latest update far surpassed rivals, showing AI’s potential for unthinkable progress between models over time.</li>
<li>Midjourney v6 alpha outperforms other models on the subject matter for this experiment, showing significant promise for future AI image generation.</li>
<li>Despite challenges, several of the images generated had the tell-tale signs of how individual models might excel with particular mediums and subject matter.</li>
</ul>
<p><strong>Encountered Challenges:</strong></p>
<ul>
<li>The disparity between different AI image generators in terms of presets and default models posed unexpected challenges, emphasizing the ongoing difficulties in conveying nuanced artistic visions to AI systems.</li>
<li>The cost associated with pay-as-you-go platforms can quickly escalate, especially when numerous adjustments are needed to achieve the desired imagery.</li>
</ul>
<p><u></u>Artwork created with Midjourney v6 alpha<u></u></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/syntaxandempathy\.github\.io\/s-and-e-hub");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© {date:YYYY} Syntax &amp; Empathy</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>